import e,{useState as t,useId as r,useEffect as a}from"react";import o from"export-from-json";import{Button as l,Checkbox as i,Select as n}from"@niagads/ui";import{ArrowDownTrayIcon as m}from"@heroicons/react/24/solid";import{EXPORT_FILE_FORMATS as s}from"@niagads/common";const d=(e,t,r,a)=>{const l=""!==e.getState().globalFilter,i=e.getVisibleFlatColumns().filter((e=>"select-col"!=e.id)).map((e=>e.id)),n=(l?r?e.getSortedRowModel().rows:e.getPreFilteredRowModel().rows:e.getSortedRowModel().rows).map((e=>Object.fromEntries(i.map((t=>[t,e.getValue(t)])))));o({data:n,fileName:t,withBOM:!0,extension:a,delimiter:"txt"==a?"\t":",",exportType:"txt"==a?"csv":a})},c=({isFiltered:o,onSubmit:d})=>{const[c,p]=t(o),u=r();return a((()=>{p(o)}),[o]),e.createElement("div",{className:"relative inline-block text-left dropdown"},e.createElement(l,{variant:"white"},e.createElement(m,{className:"icon-button"}),e.createElement("span",{className:"ml-2 uppercase"},"Export")),e.createElement("div",{className:"hidden dropdown-menu"},e.createElement("div",{className:"z-50 absolute right-0 w-56 mt-2 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg outline-none","aria-labelledby":`${u}-headlessui-menu-button}`,id:`${u}-headlessui-menu-items`,role:"menu"},e.createElement("div",{className:"px-4 py-3"},e.createElement("form",{id:u,onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);d(Object.fromEntries(t))}},o&&e.createElement(i,{name:"filtered_only",variant:"accent",value:c.toString(),label:"Filtered Rows Only",checked:c,onChange:()=>p(!c)}),e.createElement(n,{id:`${u}_select_export_format"`,name:"format",fields:s,label:"Export table data as"}),e.createElement("div",{className:"mt-2 flex justify-center"},e.createElement(l,{size:"md"},"Export")))))))};export{c as TableExportControls,d as exportTable};
//# sourceMappingURL=TableExportControls.js.map
